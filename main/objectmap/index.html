<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="ObjectMap"><title>objectmap - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" disabled href="../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" disabled href="../static.files/ayu-be46fdc453a55015.css"><script src="../static.files/storage-3891ce972e3a2bf8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-98a684e84ae5b08b.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../objectmap/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../objectmap/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate objectmap</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">objectmap</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/objectmap/lib.rs.html#1-1083">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="objectmap"><a href="#objectmap">ObjectMap</a></h2>
<p>A <code>#[forbid_unsafe]</code> ordered map for Rust.</p>
<p><a href="https://crates.io/crates/objectmap"><img src="https://img.shields.io/crates/v/objectmap.svg" alt="crate version" /></a>
<a href="https://github.com/khonsulabs/objectmap/actions?query=workflow:Tests"><img src="https://img.shields.io/github/actions/workflow/status/khonsulabs/objectmap/rust.yml?branch=main" alt="Live Build Status" /></a>
<a href="https://khonsulabs.github.io/objectmap/coverage/"><img src="https://khonsulabs.github.io/objectmap/coverage/badge.svg" alt="HTML Coverage Report for main branch" /></a>
<a href="https://khonsulabs.github.io/objectmap/main/objectmap/"><img src="https://img.shields.io/badge/docs-main-informational" alt="Documentation for main branch" /></a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>objectmap::ObjectMap;

<span class="kw">let </span><span class="kw-2">mut </span>map = ObjectMap::new();
map.insert(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>);
map.insert(<span class="string">&quot;b&quot;</span>, <span class="number">2</span>);
<span class="macro">assert_eq!</span>(map.get(<span class="kw-2">&amp;</span><span class="string">&quot;a&quot;</span>), <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span><span class="number">1</span>));
<span class="kw">let </span>replaced = map.insert(<span class="string">&quot;a&quot;</span>, <span class="number">2</span>).expect(<span class="string">&quot;value exists&quot;</span>);
<span class="macro">assert_eq!</span>(map.get(<span class="kw-2">&amp;</span><span class="string">&quot;a&quot;</span>), <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span><span class="number">2</span>));
<span class="macro">assert_eq!</span>(replaced.value, <span class="number">1</span>);</code></pre></div>
<h3 id="why"><a href="#why">Why?</a></h3>
<p>This crate started as a thought experiment: when using <a href="https://github.com/khonsulabs/interner">interned
strings</a>, could an ordered <code>Vec</code> outperform a <code>HashMap</code> for “small”
collections. And, if it could, how would it compare to <code>BTreeMap</code>? The use case
being considered was <a href="https://github.com/khonsulabs/objectmap">objectmap</a>, where most collections were expected to
be well under 100 elements.</p>
<p>In addition to performing similarly or better than <code>HashMap</code> and <code>BTreeMap</code> for
the intended use cases, a generic <code>merge_with</code> API was designed that optimally
merges the contents of two collections together. This operation is expected to
be a common operation for <a href="https://github.com/khonsulabs/objectmap">objectmap</a>, and there is no optimal way to
write such an algorithm with <code>HashMap</code> or <code>BTreeMap</code>.</p>
<p>This collection <strong>is not always better than <code>HashMap</code> and/or <code>BTreeMap</code></strong>, and
depending on your <code>Key</code> and <code>Value</code> types, your mileage may vary. Before using
this in your own project, you should benchmark your intended use case to ensure
it meets your performance needs.</p>
<h3 id="benchmarks"><a href="#benchmarks">Benchmarks</a></h3>
<p>The benchmark suite can be run via cargo:</p>
<div class="example-wrap"><pre class="language-sh"><code>cargo bench -p benchmarks
</code></pre></div>
<p>The suite uses randomization, which means that each run may produce slightly
different results. However, each data structure is tested with the same
randomized data, so each individual run of a benchmark is a true comparison.</p>
<p>Full results as run on Github Actions <a href="https://khonsulabs.github.io/objectmap/benchmarks/report/index.html">can be viewed
here</a>. Here
are the results run from the developer’s machine (an AMD Ryzen 7 3800X) for data
sets containing 25 elements:</p>
<div><table><thead><tr><th>Benchmark</th><th>Key Type</th><th>ObjectMap</th><th>HashMap (<a href="https://github.com/servo/rust-fnv">fnv</a>)</th><th>BTreeMap</th></tr></thead><tbody>
<tr><td>fill random</td><td>u8</td><td>211.0ns</td><td>408.1ns</td><td>612.2ns</td></tr>
<tr><td>fill random</td><td>usize</td><td>201.6ns</td><td>298.5ns</td><td>640.0ns</td></tr>
<tr><td>fill random</td><td>u128</td><td>282.0ns</td><td>415.6ns</td><td>680.2ns</td></tr>
<tr><td>fill seq</td><td>u8</td><td>221.0ns</td><td>418.3ns</td><td>606.6ns</td></tr>
<tr><td>fill seq</td><td>usize</td><td>189.1ns</td><td>291.1ns</td><td>603.3ns</td></tr>
<tr><td>fill seq</td><td>u128</td><td>262.6ns</td><td>401.6ns</td><td>659.7ns</td></tr>
<tr><td>get</td><td>u8</td><td>5.0ns</td><td>4.5ns</td><td>5.6ns</td></tr>
<tr><td>get</td><td>usize</td><td>5.2ns</td><td>6.4ns</td><td>6.1ns</td></tr>
<tr><td>get</td><td>u128</td><td>6.0ns</td><td>11.6ns</td><td>7.2ns</td></tr>
</tbody></table>
</div>
<p>No benchmark suite is ever perfect. Pull requests are welcome. Each potential
user who cares about maximal performance should benchmark their own use case on
their target hardware rather than rely on these benchmark results.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Drain.html" title="struct objectmap::Drain">Drain</a></div><div class="desc docblock-short">An iterator that removes all of the <a href="struct.Field.html" title="struct objectmap::Field"><code>Field</code></a>s of an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Field.html" title="struct objectmap::Field">Field</a></div><div class="desc docblock-short">A field in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.IntoIter.html" title="struct objectmap::IntoIter">IntoIter</a></div><div class="desc docblock-short">An iterator that returns all of the elements of an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a> while
freeing its underlying memory.</div></li><li><div class="item-name"><a class="struct" href="struct.IntoValues.html" title="struct objectmap::IntoValues">IntoValues</a></div><div class="desc docblock-short">An iterator returning all of the values contained in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a> as its
underlying storage is freed.</div></li><li><div class="item-name"><a class="struct" href="struct.Iter.html" title="struct objectmap::Iter">Iter</a></div><div class="desc docblock-short">An iterator over the <a href="struct.Field.html" title="struct objectmap::Field"><code>Field</code></a>s in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.IterMut.html" title="struct objectmap::IterMut">IterMut</a></div><div class="desc docblock-short">An iterator over mutable <a href="struct.Field.html" title="struct objectmap::Field"><code>Field</code></a>s contained in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ObjectMap.html" title="struct objectmap::ObjectMap">ObjectMap</a></div><div class="desc docblock-short">An ordered Key/Value map.</div></li><li><div class="item-name"><a class="struct" href="struct.OccupiedEntry.html" title="struct objectmap::OccupiedEntry">OccupiedEntry</a></div><div class="desc docblock-short">An entry that exists in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.VacantEntry.html" title="struct objectmap::VacantEntry">VacantEntry</a></div><div class="desc docblock-short">A vacant entry in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Values.html" title="struct objectmap::Values">Values</a></div><div class="desc docblock-short">An iterator over the values contained in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ValuesMut.html" title="struct objectmap::ValuesMut">ValuesMut</a></div><div class="desc docblock-short">An iterator over mutable values contained in an <a href="struct.ObjectMap.html" title="struct objectmap::ObjectMap"><code>ObjectMap</code></a>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Entry.html" title="enum objectmap::Entry">Entry</a></div><div class="desc docblock-short">The result of looking up an entry by its key.</div></li><li><div class="item-name"><a class="enum" href="enum.SearchKey.html" title="enum objectmap::SearchKey">SearchKey</a></div><div class="desc docblock-short">A key provided to the <a href="struct.ObjectMap.html#method.entry" title="method objectmap::ObjectMap::entry"><code>ObjectMap::entry</code></a> function.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Sort.html" title="trait objectmap::Sort">Sort</a></div><div class="desc docblock-short">Provides a comparison between <code>Self</code> and <code>Other</code>.</div></li></ul></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="objectmap" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0 (84c898d65 2023-04-16)" data-search-js="search-8a59a8356673ec1f.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" ></div></body></html>